<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Problemas Recientes | IMP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(180deg,#f5f7fb,#eef2ff);
  margin:0;
  padding:1rem;
}
h1{
  text-align:center;
  color:#d32f2f;
  font-size:2.5rem;
}
.subtitle{
  text-align:center;
  color:#666;
  margin-bottom:2rem;
}
.galeria{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:1.5rem;
  max-width:1200px;
  margin:auto;
}
.item{
  background:#050b1a;
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  border:2px solid #00e5ff;
  box-shadow:0 0 12px rgba(0,229,255,.6);
  transition:.3s;
}
.item:hover{
  transform:translateY(-8px) scale(1.03);
  border-color:#ff1744;
}
.item img{
  width:100%;
  height:220px;
  object-fit:cover;
  transition:.5s;
}
.item:hover img{
  transform:scale(1.15);
}
a{
  display:block;
  text-align:center;
  margin:2rem;
  text-decoration:none;
  color:#d32f2f;
  font-weight:600;
}

/* MODAL */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  backdrop-filter:blur(8px);
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal.activo{display:flex}
.modal-content{
  position:relative;
  max-width:95%;
}
.modal-img{
  max-height:75vh;
  max-width:100%;
  border-radius:16px;
  cursor:zoom-in;
}
.modal.fullscreen .modal-img{
  cursor:zoom-out;
}
.cerrar{
  position:absolute;
  top:20px;
  right:30px;
  color:white;
  font-size:2.8rem;
  cursor:pointer;
}
.modal-nav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  color:white;
  font-size:2rem;
  cursor:pointer;
  padding:10px;
}
.modal-nav.prev{left:20px}
.modal-nav.next{right:20px}
.modal-texto{
  color:white;
  text-align:center;
  margin-top:1rem;
}
.modal-counter{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  color:white;
  background:rgba(0,0,0,.6);
  padding:.4rem 1rem;
  border-radius:20px;
}
</style>
</head>

<body>

<h1>Problemas Recientes</h1>
<p class="subtitle">Los problemas más recientes subidos a la plataforma</p>

<div class="galeria" id="galeria"></div>
<a href="index.html">← Volver al inicio</a>

<!-- MODAL -->
<div class="modal" id="modal">
  <span class="cerrar">&times;</span>
  <div class="modal-content">
    <div class="modal-nav prev">‹</div>
    <img id="modalImg" class="modal-img">
    <div class="modal-nav next">›</div>
    <div class="modal-counter" id="modalCounter"></div>
  </div>
  <p class="modal-texto" id="modalTexto"></p>
</div>

<script>
/* ===== IMÁGENES ===== */
const imagenesRecientes = [
  {archivo:"img1.png",texto:"Problema 1"},
  {archivo:"img2.png",texto:"Problema 2"},
  {archivo:"img3.png",texto:"Problema 3"},
  {archivo:"img4.png",texto:"Problema 4"}
];

const BASE_URL = "https://raw.githubusercontent.com/IMP735-code/IMP/main/recientes/";

/* ===== ELEMENTOS ===== */
const galeria = document.getElementById("galeria");
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modalImg");
const modalTexto = document.getElementById("modalTexto");
const modalCounter = document.getElementById("modalCounter");

let currentIndex = 0;

/* ===== GALERÍA ===== */
imagenesRecientes.forEach((img,i)=>{
  const div=document.createElement("div");
  div.className="item";
  div.innerHTML=`<img src="${BASE_URL+img.archivo}">`;
  div.onclick=()=>openModal(i);
  galeria.appendChild(div);
});

/* ===== MODAL ===== */
function openModal(i){
  currentIndex=i;
  modal.classList.add("activo");
  updateModal();
  document.body.style.overflow="hidden";
}

function cerrarModal(){
  modal.classList.remove("activo","fullscreen");
  if(document.fullscreenElement) document.exitFullscreen();
  document.body.style.overflow="";
}

function updateModal(){
  modalImg.src=BASE_URL+imagenesRecientes[currentIndex].archivo;
  modalTexto.textContent=imagenesRecientes[currentIndex].texto;
  modalCounter.textContent=`${currentIndex+1} / ${imagenesRecientes.length}`;
}

function nextImage(){
  currentIndex=(currentIndex+1)%imagenesRecientes.length;
  updateModal();
}
function prevImage(){
  currentIndex=(currentIndex-1+imagenesRecientes.length)%imagenesRecientes.length;
  updateModal();
}

/* ===== EVENTOS ===== */
document.querySelector(".cerrar").onclick=cerrarModal;
document.querySelector(".next").onclick=nextImage;
document.querySelector(".prev").onclick=prevImage;

document.addEventListener("keydown",e=>{
  if(!modal.classList.contains("activo"))return;
  if(e.key==="Escape")cerrarModal();
  if(e.key==="ArrowRight")nextImage();
  if(e.key==="ArrowLeft")prevImage();
});

/* ===== SWIPE ===== */
let startX=0;
modalImg.addEventListener("touchstart",e=>startX=e.changedTouches[0].screenX);
modalImg.addEventListener("touchend",e=>{
  const endX=e.changedTouches[0].screenX;
  if(endX<startX-50)nextImage();
  if(endX>startX+50)prevImage();
});

/* ===== CLICK LADOS ===== */
modalImg.addEventListener("click",e=>{
  const w=window.innerWidth;
  if(e.clientX>w*0.6)nextImage();
  if(e.clientX<w*0.4)prevImage();
});

/* ===== FULLSCREEN ===== */
modalImg.addEventListener("dblclick",()=>{
  if(!document.fullscreenElement){
    modal.requestFullscreen();
    modal.classList.add("fullscreen");
  }else{
    document.exitFullscreen();
    modal.classList.remove("fullscreen");
  }
});
</script>

</body>
</html>
